<div class="border border-gray-200 rounded-lg shadow-sm account-dropdown"
     [class.border-blue-500]="isOpen"> 
  
  <div
    class="grid grid-cols-[auto_repeat(4,minmax(0,1fr))_auto] items-center py-3 pl-3 pr-4 cursor-pointer hover:bg-gray-50 transition-colors"
    (click)="onHeaderClick()"
  >
    
    <div class="flex justify-center items-center px-1">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500 transition-transform duration-300" 
             [class.rotate-180]="isOpen" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
        </svg>
    </div>

    <div class="text-sm font-medium flex justify-center">
        <span class="px-2 py-0.5 rounded-full text-xs font-semibold"
              [ngClass]="{
                'bg-green-100 text-green-800': account.status === 'ACTIVE',
                'bg-yellow-100 text-yellow-800': account.status === 'SUSPENDED',
                'bg-red-100 text-red-800': account.status === 'CLOSED'
              }">
            {{ account.status }}
        </span>
    </div>
    
    <div class="text-sm text-gray-800 font-mono text-center">{{ account.accountNumber }}</div>
    
    <div class="text-sm text-gray-800 text-center">{{ account.accountName }}</div>
    
    <div class="text-sm text-gray-800 text-center">{{ account.accountType }}</div>
    
    <div class="flex justify-center space-x-3">
      <button
        type="button"
        class="text-gray-500 hover:text-blue-600 p-1 rounded-full hover:bg-blue-100 transition-colors"
        (click)="onEdit($event)"
        title="Edit Account"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" 
                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
        </svg>
      </button>
      
      <button
        type="button"
        class="text-gray-500 hover:text-red-600 p-1 rounded-full hover:bg-red-100 transition-colors"
        (click)="onDelete($event)"
        title="Delete Account"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" 
             viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" 
                d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
      </button>
    </div>
  </div>

  @if (isOpen) {
    <app-products
      [accountId]="account.id"
    ></app-products>
  }
</div>